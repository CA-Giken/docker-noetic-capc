 プログラム
   変数設定
   開始前シーケンス
     スクリプト: FORCE_CONTROL.script
   ロボットプログラム
     'SET_BUCKET()'
     'ROVI_CAPTURE'
     'ROVI_SOLVE'
     'UF:=Y2'
     DistPillar:=0.5
     PICK
       荷重の設定: k10
       '1=MOVE'
       '2=MOVE+FIXEDBALANCE'
       '3=FORCEMOVE'
       '4=FORCEZ'
       '5=FORCEZ+WEAVE'
       '6=[LM]FORCEZ+WEAVE'
       '7=[RM]FORCEZ+WEAVE'
       '8=[RM]FORCEZ'
       i:=8
       ループ3回
         スイッチ文 i
           ケース 1
             MoveL
               gGD_3_M_RX
               gGD_2_M_RX
               待機: 0.5
               'ポップアップ: ok?'
               gGD_1_M_RX
           ケース 2
             MoveL
               gGD_3_M_RX
               gGD_2_M_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
               gGD_1_M_RX
               設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 3
             MoveL
               gGD_3_M_RX
               gGD_2_M_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             フォース
               MoveL
                 gGD_1_M_RX
             設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 4
             MoveL
               gGD_3_M_RX
               gGD_2_M_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             フォース
               待機 CurrPos_p[1]≤(gGD_1_M_RX[1]-0.015)
             ポップアップ: ok
             設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 5
             MoveL
               gGD_3_M_RX
               gGD_2_M_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             Sub3100_Option:=9
             フォース
               ループ CurrPos_p[1]>(gGD_1_M_RX[1]-0.015)
                 If文 tcp_speed[2]<0.0005
                   '7:RX+,8:RX-,9:RY+,10:RY-,11:RZ+,12:RZ-'
                   Sub3100_Xd:=[0.,0.,0.,0.,0.,0.]
                   Sub3100_q:=floor((Sub3100_Option-1) / 2)
                   Sub3100_e:=1-((Sub3100_Option-1) % 2)*2
                   Sub3100_t:=0.2
                   Sub3100_Xd[Sub3100_q]=d2r(Sub3100_XdRot)*Sub3100_e
                   speedl(Sub3100_Xd,Sub3100_aRot,Sub3100_t)
                   If文 Sub3100_Option≟9
                     Sub3100_Option:=10
                   Else
                     Sub3100_Option:=9
             ポップアップ: ok
             設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 6
             MoveL
               gGD_3_LM_RX
               gGD_2_LM_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             Sub3100_Option:=9
             フォース
               ループ CurrPos_p[1]>(gGD_1_LM_RX[1]-0.015)
                 If文 tcp_speed[2]<0.0005
                   '7:RX+,8:RX-,9:RY+,10:RY-,11:RZ+,12:RZ-'
                   Sub3100_Xd:=[0.,0.,0.,0.,0.,0.]
                   Sub3100_q:=floor((Sub3100_Option-1) / 2)
                   Sub3100_e:=1-((Sub3100_Option-1) % 2)*2
                   Sub3100_t:=0.2
                   Sub3100_Xd[Sub3100_q]=d2r(Sub3100_XdRot)*Sub3100_e
                   speedl(Sub3100_Xd,Sub3100_aRot/2.0,Sub3100_t)
                   If文 Sub3100_Option≟9
                     Sub3100_Option:=10
                   Else
                     Sub3100_Option:=9
             ポップアップ: ok
             設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 7
             MoveL
               gGD_3_RM_RX
               gGD_2_RM_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             Sub3100_Option:=9
             フォース
               ループ CurrPos_p[1]>(gGD_1_RM_RX[1]-0.015)
                 If文 tcp_speed[2]<0.0005
                   '7:RX+,8:RX-,9:RY+,10:RY-,11:RZ+,12:RZ-'
                   Sub3100_Xd:=[0.,0.,0.,0.,0.,0.]
                   Sub3100_q:=floor((Sub3100_Option-1) / 2)
                   Sub3100_e:=1-((Sub3100_Option-1) % 2)*2
                   Sub3100_t:=0.2
                   Sub3100_Xd[Sub3100_q]=d2r(Sub3100_XdRot)*Sub3100_e
                   speedl(Sub3100_Xd,Sub3100_aRot/2.0,Sub3100_t)
                   If文 Sub3100_Option≟9
                     Sub3100_Option:=10
                   Else
                     Sub3100_Option:=9
             ポップアップ: ok
             設定 GPBO_BLStart=HI:Pulse 1.0
           ケース 8
             MoveL
               gGD_3_RM_RX
               gGD_2_RM_RX
               設定 GPBO_BLStop=HI:Pulse 1.0
               待機: 0.5
               'ポップアップ: ok?'
             フォース
               待機 CurrPos_p[1]≤(gGD_1_RM_RX[1]-0.015)
             ポップアップ: ok
             設定 GPBO_BLStart=HI:Pulse 1.0
         If文 i<6
           MoveL
             gGD_2_M_RX
             gGD_3_M_RX
         ElseIf i≟6
           MoveL
             gGD_2_LM_RX
             gGD_3_LM_RX
         Else
           MoveL
             gGD_2_RM_RX
             gGD_3_RM_RX
         待機: 4.0
       停止
       If文 (0≤DistPillar and DistPillar≤DistPillarAPTh)
         MoveL
           gGD_4_LM
         MoveL
           gGD_3_LM_RX
           gGD_2_LM_RX
           設定 GPBO_BLStop=HI:Pulse 1.0
           待機: 0.5
           'ポップアップ: ok?'
           gGD_1_LM_RX
         Sub3100_Option:=9
         フォース
           ループ CurrPos_p[1]>(gGD_1_M_RX[1]-0.015)
             If文 tcp_speed[2]<0.0005
               '7:RX+,8:RX-,9:RY+,10:RY-,11:RZ+,12:RZ-'
               Sub3100_Xd:=[0.,0.,0.,0.,0.,0.]
               Sub3100_q:=floor((Sub3100_Option-1) / 2)
               Sub3100_e:=1-((Sub3100_Option-1) % 2)*2
               Sub3100_t:=0.2
               Sub3100_Xd[Sub3100_q]=d2r(Sub3100_XdRot)*Sub3100_e
               speedl(Sub3100_Xd,Sub3100_aRot,Sub3100_t)
               If文 Sub3100_Option≟9
                 Sub3100_Option:=10
               Else
                 Sub3100_Option:=9
         設定 GPBO_BLStart=HI:Pulse 1.0
       ElseIf (-DistPillarAPTh≤DistPillar and DistPillar≤0)
         MoveL
           gGD_4_RM
         MoveL
           gGD_3_RM_RX
           gGD_2_RM_RX
           待機: 0.5
           'ポップアップ: ok?'
           gGD_1_RM_RX
       Else
         MoveL
           gGD_3_M_RX
           gGD_2_M_RX
           設定 GPBO_BLStop=HI:Pulse 1.0
           待機: 0.5
           'ポップアップ: ok?'
         フォース
           MoveL
             gGD_1_M_RX
         設定 GPBO_BLStart=HI:Pulse 1.0
         待機: 2.0
         ポップアップ: force done!
       If文 ( not GPBI_WorkExists)
         SubPrgResult:=821
         待機: 999999.0
   スレッド_1
     CurrPos_p=get_actual_tcp_pose()
     tcp_speed:=get_actual_tcp_speed()
     tcp_force_tool:=GET_TCP_FORCE_TOOL()
     sync()
