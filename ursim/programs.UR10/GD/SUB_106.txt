 プログラム
   変数設定
   ロボットプログラム
     If文 GPBI_WorkExists
       TRANSFER
         設定 DO[7]=オン
         荷重の設定: k120
         If文 UseZRotate
           設定
           sync()
           If文 UseBaseZRotate
             If文 (WorkPosNo≟0)
               gGD_pos5:=g2GD_pos5_NEAR
             ElseIf (WorkPosNo≟1)
               gGD_pos5:=g1GD_pos5_NEAR
             CurrPos_p=get_actual_tcp_pose()
             MoveL
               'PoseSub:=pose_sub(CurrPos_p,g2GD_pos5_NEAR)'
               PoseSub:=pose_sub(CurrPos_p,gGD_pos5)
               RZSub:=r2d(PoseSub[5])
               If文 (norm(PoseSub[5])≥d2r(RZTh))
                 PoseAdd:=pose_add(p[0,0,0,0,0,d2r(RZSub)],p[0,0,0,CurrPos_p[3],CurrPos_p[4],CurrPos_p[5]])
                 PoseAdd:=p[CurrPos_p[0],CurrPos_p[1],CurrPos_p[2],PoseAdd[3],PoseAdd[4],PoseAdd[5]]
                 PoseAdd
           Else
             If文 (WorkPosNo≟0)
               gGD_pos5:=g2GD_pos5
             ElseIf (WorkPosNo≟1)
               gGD_pos5:=g1GD_pos5
             MoveL
               'PoseSub:=pose_sub(CurrPos, pose_trans(g2GD_pos5, pose_inv(get_tcp_offset())))'
               PoseSub:=pose_sub(CurrPos, pose_trans(gGD_pos5, pose_inv(get_tcp_offset())))
               RZSub:=r2d(PoseSub[5])
               If文 (norm(PoseSub[5])≥d2r(RZTh))
                 PoseSub[0]=0.0
                 PoseSub[1]=0.0
                 PoseSub[2]=0.0
                 PoseAdd:=pose_add(PoseSub, CurrPos)
                 PoseAdd
         If文 UseCVCorr and UseCVCorrCam
           WorkNoOffset:=WorkNoCV
           thrd108:=RUN_THREAD_ROVI()
         If文 (WorkPosNo≟0)
           'MoveL'
           set_tcp(CutOffTCP)
           sync()
           MoveL
             If文 UseZSlide
               gGD_pos5:=GET_ZSLIDE_POS(g2GD_pos5_NEAR)
             Else
               gGD_pos5:=g2GD_pos5
             DistBKUpper=GET_DIST(CurrPos_p,gGD_pos5)
             If文 ( not CHECK_DIST_NEAR(CurrPos_p, gGD_pos5, DistBKUpperTh))
               gGD_pos5
             設定 DO[7]=オフ
           設定 DO[6]=オン
           MoveL
             荷重の設定: k10
             'g2GD_pos4'
             g2GD_pos3
             'g2GD_pos2'
             PoseAdd:=GET_CVCORR_POS(g2GD_pos2)
             PoseAdd
           設定 DO[6]=オフ
           '設定 DO[4]=オン'
           'MoveL'
         ElseIf (WorkPosNo≟1)
           'CircleMove'
           '設定'
           'If文 UseBaseZRotate'
           'MoveL'
           set_tcp(CutOffTCP)
           sync()
           MoveL
             If文 UseZSlide
               gGD_pos5:=GET_ZSLIDE_POS(g1GD_pos5_NEAR)
             Else
               gGD_pos5:=g1GD_pos5
             DistBKUpper=GET_DIST(CurrPos_p,gGD_pos5)
             If文 ( not CHECK_DIST_NEAR(CurrPos_p, gGD_pos5, DistBKUpperTh))
               gGD_pos5
           設定 DO[4]=オフ
           設定 DO[6]=オン
           MoveL
             荷重の設定: k10
             g1GD_pos4
             g1GD_pos3
             'g1GD_pos2'
             PoseAdd:=GET_CVCORR_POS(g1GD_pos2)
             PoseAdd
           設定 DO[6]=オフ
           '設定 DO[4]=オン'
           'MoveL'
     '設定 DO[4]=オフ'
     If文 ( not GPBI_WorkExists)
       SubPrgResult:=820
       待機: 999999.0
